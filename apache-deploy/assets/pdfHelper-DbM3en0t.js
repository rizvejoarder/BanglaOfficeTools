import{p as s}from"./pdfjs-CwH_0J_o.js";let t=!1,n=0;const i=3,o=["https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js","https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js","https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.worker.min.js"],a=async()=>{if(t)return!0;for(let e=0;e<o.length;e++)try{const r=o[e];if(console.log(`Attempting to load PDF worker from: ${r}`),(await fetch(r,{method:"HEAD"})).ok)return s.GlobalWorkerOptions.workerSrc=r,t=!0,console.log(`PDF.js worker successfully initialized with: ${r}`),!0}catch(r){console.warn(`Failed to load worker from ${o[e]}:`,r);continue}return console.warn("All worker sources failed HEAD requests, using first source as fallback"),s.GlobalWorkerOptions.workerSrc=o[0],t=!0,!0},l=async()=>{if(!t){if(n++,n>i)throw new Error("পিডিএফ প্রসেসিং সিস্টেম লোড করতে ব্যর্থ। ইন্টারনেট সংযোগ পরীক্ষা করুন।");try{await a()}catch(e){throw console.error("PDF worker initialization failed:",e),new Error("পিডিএফ প্রসেসিং সিস্টেম প্রস্তুত করতে সমস্যা হয়েছে।")}}},w=async e=>{await l();try{return await s.getDocument({data:e,useWorkerFetch:!1,disableAutoFetch:!0,disableStream:!0}).promise}catch(r){throw console.error("PDF loading error:",r),r.message.includes("worker")?new Error("পিডিএফ প্রসেসিং ওয়ার্কার লোড করতে সমস্যা হয়েছে। পেজ রিফ্রেশ করে আবার চেষ্টা করুন।"):r.message.includes("Invalid PDF")?new Error("অবৈধ বা দূষিত পিডিএফ ফাইল। অন্য পিডিএফ ফাইল চেষ্টা করুন।"):new Error(`পিডিএফ লোড করতে সমস্যা হয়েছে: ${r.message}`)}};export{w as l};
